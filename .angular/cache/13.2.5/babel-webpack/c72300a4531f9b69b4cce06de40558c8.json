{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/services.service\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\n\nfunction CommunicationsPage_ion_card_10_td_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 12)(1, \"ion-card-subtitle\");\n    i0.ɵɵtext(2, \"S\\u00ED\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction CommunicationsPage_ion_card_10_td_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 12)(1, \"ion-card-subtitle\");\n    i0.ɵɵtext(2, \"No\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction CommunicationsPage_ion_card_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-card\", 2);\n    i0.ɵɵlistener(\"click\", function CommunicationsPage_ion_card_10_Template_ion_card_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const communication_r1 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.servicio.goTo(\"/communications/communication/\" + communication_r1.communication_id);\n    });\n    i0.ɵɵelementStart(1, \"ion-card-header\")(2, \"table\")(3, \"tr\")(4, \"td\", 11)(5, \"ion-card-subtitle\")(6, \"b\");\n    i0.ɵɵtext(7, \"Tipo:\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"td\", 12)(9, \"ion-card-subtitle\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"tr\")(12, \"td\", 11)(13, \"ion-card-subtitle\")(14, \"b\");\n    i0.ɵɵtext(15, \"Empleado:\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(16, \"td\", 12)(17, \"ion-card-subtitle\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(19, \"tr\")(20, \"td\", 11)(21, \"ion-card-subtitle\")(22, \"b\");\n    i0.ɵɵtext(23, \"Departamento:\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(24, \"td\", 12)(25, \"ion-card-subtitle\");\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(27, \"td\", 12);\n    i0.ɵɵelement(28, \"ion-card-subtitle\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(29, \"tr\")(30, \"td\", 11)(31, \"ion-card-subtitle\")(32, \"b\");\n    i0.ɵɵtext(33, \"An\\u00F3nimo:\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(34, CommunicationsPage_ion_card_10_td_34_Template, 3, 0, \"td\", 13);\n    i0.ɵɵtemplate(35, CommunicationsPage_ion_card_10_td_35_Template, 3, 0, \"td\", 13);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const communication_r1 = ctx.$implicit;\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate(communication_r1.type_communication);\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate2(\"\", communication_r1.recipient_first_name, \" \", communication_r1.recipient_last_name, \"\");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate(communication_r1.department);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngIf\", communication_r1.anonymous == true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", communication_r1.anonymous == false);\n  }\n}\n\nexport let CommunicationsPage = /*#__PURE__*/(() => {\n  class CommunicationsPage {\n    constructor(servicio, loading, route) {\n      this.servicio = servicio;\n      this.loading = loading;\n      this.route = route;\n      this.communications = [];\n      this.total = 0;\n      this.text = '';\n      this.anonymous = false;\n      this.user_id = null;\n    }\n\n    ngOnInit() {}\n\n    ionViewWillEnter() {\n      this.user_id = this.route.snapshot.paramMap.get('user_id');\n      this.load_communications();\n    }\n\n    load_communications() {\n      return __awaiter(this, void 0, void 0, function* () {\n        let l = yield this.loading.create();\n        l.present(); //this.servicio.communications_list(this.text)\n\n        this.servicio.communications_list_user(this.user_id, this.text).subscribe(data => {\n          this.communications = data.info.items;\n          console.log(this.user_id);\n          console.log(this.text);\n          /*\n          this.storage.get('user_id').then((val) => {\n            console.log(val);\n          });\n          */\n          //console.log(this.communications);\n\n          this.total = data.info.total;\n          l.dismiss();\n        }, error => {\n          l.dismiss();\n        });\n      });\n    }\n\n    buscar(event) {\n      console.log(event);\n      this.text = event.detail.value;\n    }\n\n  }\n\n  CommunicationsPage.ɵfac = function CommunicationsPage_Factory(t) {\n    return new (t || CommunicationsPage)(i0.ɵɵdirectiveInject(i1.ServicesService), i0.ɵɵdirectiveInject(i2.LoadingController), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n  };\n\n  CommunicationsPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CommunicationsPage,\n    selectors: [[\"app-communications\"]],\n    decls: 14,\n    vars: 3,\n    consts: [[\"color\", \"dark\"], [\"slot\", \"end\"], [3, \"click\"], [\"name\", \"log-out-outline\", \"size\", \"large\"], [3, \"fullscreen\"], [\"id\", \"container\"], [\"animated\", \"true\", \"debounce\", \"1000\", \"placeholder\", \"Buscar...\", 1, \"search\", 3, \"ngModel\", \"ionChange\", \"ngModelChange\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"vertical\", \"bottom\", \"horizontal\", \"end\", \"slot\", \"fixed\", 1, \"a\\u00F1adir\"], [\"color\", \"dark\", 3, \"click\"], [\"name\", \"add\"], [1, \"left\"], [1, \"right\"], [\"class\", \"right\", 4, \"ngIf\"]],\n    template: function CommunicationsPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\", 0)(2, \"ion-title\");\n        i0.ɵɵtext(3, \"Comunicaciones Enviadas\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-buttons\", 1)(5, \"ion-button\", 2);\n        i0.ɵɵlistener(\"click\", function CommunicationsPage_Template_ion_button_click_5_listener() {\n          return ctx.servicio.goTo(\"/login\");\n        });\n        i0.ɵɵelement(6, \"ion-icon\", 3);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(7, \"ion-content\", 4)(8, \"div\", 5)(9, \"ion-searchbar\", 6);\n        i0.ɵɵlistener(\"ionChange\", function CommunicationsPage_Template_ion_searchbar_ionChange_9_listener() {\n          return ctx.load_communications();\n        })(\"ngModelChange\", function CommunicationsPage_Template_ion_searchbar_ngModelChange_9_listener($event) {\n          return ctx.text = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, CommunicationsPage_ion_card_10_Template, 36, 6, \"ion-card\", 7);\n        i0.ɵɵelementStart(11, \"ion-fab\", 8)(12, \"ion-fab-button\", 9);\n        i0.ɵɵlistener(\"click\", function CommunicationsPage_Template_ion_fab_button_click_12_listener() {\n          return ctx.servicio.goTo(\"/communications/\" + ctx.user_id + \"/communication-add\");\n        });\n        i0.ɵɵelement(13, \"ion-icon\", 10);\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"fullscreen\", true);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.text);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.communications);\n      }\n    },\n    directives: [i2.IonHeader, i2.IonToolbar, i2.IonTitle, i2.IonButtons, i2.IonButton, i2.IonIcon, i2.IonContent, i2.IonSearchbar, i2.TextValueAccessor, i4.NgControlStatus, i4.NgModel, i5.NgForOf, i2.IonCard, i2.IonCardHeader, i2.IonCardSubtitle, i5.NgIf, i2.IonFab, i2.IonFabButton],\n    styles: [\"@charset \\\"UTF-8\\\";html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{width:100%;height:100%}#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;width:100%}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}table[_ngcontent-%COMP%]{width:100%;height:100%}td[_ngcontent-%COMP%]{width:50%;line-height:1.5em}.right[_ngcontent-%COMP%]{text-align:right;padding-right:5px}.left[_ngcontent-%COMP%]{padding-left:5px}ion-card-header[_ngcontent-%COMP%]{text-align:left}.a\\\\f1[_ngcontent-%COMP%]   adir[_ngcontent-%COMP%]{position:fixed;margin-right:25px;margin-bottom:25px}.search[_ngcontent-%COMP%]{margin-top:10px}\"]\n  });\n  return CommunicationsPage;\n})();","map":null,"metadata":{},"sourceType":"module"}